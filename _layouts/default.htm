<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>{{ page.title | default: site.title }}</title>
  <meta name="description" content="{{ page.description | default: site.description }}">

  <!-- âœ… Ù‡ÙˆÙŠØ© Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§ -->
  <meta property="og:title" content="Ø³Ù…Ø³Ø§Ø± Ø·Ù„Ø¨Ùƒ | Ø¹Ù‚Ø§Ø±Ø§Øª Ù…Ø¯ÙŠÙ†Ø© Ù†ØµØ± Ø¨ÙŠÙ† ÙŠØ¯ÙŠÙƒ">
  <meta property="og:description" content="Ø´Ù‚Ù‚ØŒ Ù…Ø­Ù„Ø§ØªØŒ Ù…ÙƒØ§ØªØ¨ â€“ ÙƒÙ„ Ù…Ø§ ØªØ­ØªØ§Ø¬Ù‡ ÙÙŠ Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯.">
  <meta property="og:image" content="https://i.postimg.cc/vZH0t24C/20250628-212125.webp">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://nasr-realestate.github.io/samsar-talabak">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Ø³Ù…Ø³Ø§Ø± Ø·Ù„Ø¨Ùƒ | Ø¹Ù‚Ø§Ø±Ø§Øª Ù…Ø¯ÙŠÙ†Ø© Ù†ØµØ±">
  <meta name="twitter:description" content="Ø®Ø¯Ù…Ø§Øª Ø¹Ù‚Ø§Ø±ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© ÙÙŠ Ù‚Ù„Ø¨ Ù…Ø¯ÙŠÙ†Ø© Ù†ØµØ±">
  <meta name="twitter:image" content="https://i.postimg.cc/vZH0t24C/20250628-212125.webp">

  <!-- âœ… Ù…Ù„ÙØ§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… -->
  <link rel="stylesheet" href="/samsar-talabak/assets/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <!-- âœ… ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- âœ… Ù…Ù„Ù Ø§Ù„Ø³ÙŠÙˆ Ù…Ù† Jekyll -->
  {% seo %}
</head>

<body data-theme="light">

  {% include navbar.html %}

  <main>
    {{ content }}
  </main>

  {% include footer.html %}

  <!-- âœ… JavaScript Ù…Ø­Ø³Ù† Ù„ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ -->
  <script>
    // Ù†Ø¸Ø§Ù… ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­Ø³Ù†
    class ThemeManager {
      constructor() {
        this.themeToggle = document.getElementById('themeToggle');
        this.body = document.body;
        this.currentTheme = this.getStoredTheme() || 'light';
        
        this.init();
      }

      init() {
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸
        this.applyTheme(this.currentTheme);
        
        // Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        if (this.themeToggle) {
          this.themeToggle.addEventListener('click', () => this.toggleTheme());
          
          // ØªØ­Ø³ÙŠÙ† Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„
          this.themeToggle.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              this.toggleTheme();
            }
          });
        }

        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªÙØ¶ÙŠÙ„Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
        this.watchSystemTheme();
      }

      getStoredTheme() {
        try {
          return localStorage.getItem('theme');
        } catch (e) {
          console.warn('localStorage ØºÙŠØ± Ù…ØªØ§Ø­:', e);
          return null;
        }
      }

      setStoredTheme(theme) {
        try {
          localStorage.setItem('theme', theme);
        } catch (e) {
          console.warn('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­ÙØ¸ Ø§Ù„ÙˆØ¶Ø¹:', e);
        }
      }

      applyTheme(theme) {
        this.body.setAttribute('data-theme', theme);
        this.currentTheme = theme;
        this.setStoredTheme(theme);
        this.updateToggleIcon(theme);
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ù…Ø®ØµØµ Ù„Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
        window.dispatchEvent(new CustomEvent('themeChanged', { 
          detail: { theme } 
        }));
      }

      updateToggleIcon(theme) {
        if (this.themeToggle) {
          this.themeToggle.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
          this.themeToggle.setAttribute('aria-label', 
            theme === 'dark' ? 'ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­' : 'ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†'
          );
        }
      }

      toggleTheme() {
        const newTheme = this.currentTheme === 'dark' ? 'light' : 'dark';
        this.applyTheme(newTheme);
        
        // ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ Ù„Ù„ØªØ¨Ø¯ÙŠÙ„
        this.addToggleEffect();
      }

      addToggleEffect() {
        if (this.themeToggle) {
          this.themeToggle.style.transform = 'scale(0.8) rotate(180deg)';
          setTimeout(() => {
            this.themeToggle.style.transform = '';
          }, 200);
        }
      }

      watchSystemTheme() {
        if (window.matchMedia) {
          const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
          
          // ØªØ·Ø¨ÙŠÙ‚ ÙˆØ¶Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ ØªÙØ¶ÙŠÙ„ Ù…Ø­ÙÙˆØ¸
          if (!this.getStoredTheme()) {
            this.applyTheme(mediaQuery.matches ? 'dark' : 'light');
          }

          // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙˆØ¶Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…
          mediaQuery.addEventListener('change', (e) => {
            if (!this.getStoredTheme()) {
              this.applyTheme(e.matches ? 'dark' : 'light');
            }
          });
        }
      }
    }

    // ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªØ¬Ø±Ø¨Ø©
    class PerformanceEnhancer {
      constructor() {
        this.init();
      }

      init() {
        // ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø³Ù„Ø³
        this.enhanceScrolling();
        
        // ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª
        this.enhanceInteractions();
        
        // ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ­Ù…ÙŠÙ„
        this.enhanceLoading();
      }

      enhanceScrolling() {
        // Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±
        let scrollTimer = null;
        window.addEventListener('scroll', () => {
          document.body.classList.add('scrolling');
          
          clearTimeout(scrollTimer);
          scrollTimer = setTimeout(() => {
            document.body.classList.remove('scrolling');
          }, 150);
        }, { passive: true });
      }

      enhanceInteractions() {
        // ØªØ­Ø³ÙŠÙ† ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù‡ÙˆÙØ± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù„Ù…Ø³ÙŠØ©
        if ('ontouchstart' in window) {
          document.body.classList.add('touch-device');
        }

        // ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
        document.addEventListener('click', (e) => {
          const card = e.target.closest('.card');
          if (card) {
            this.addRippleEffect(card, e);
          }
        });
      }

      addRippleEffect(element, event) {
        const ripple = document.createElement('span');
        const rect = element.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = event.clientX - rect.left - size / 2;
        const y = event.clientY - rect.top - size / 2;

        ripple.style.cssText = `
          position: absolute;
          width: ${size}px;
          height: ${size}px;
          left: ${x}px;
          top: ${y}px;
          background: rgba(4, 231, 98, 0.3);
          border-radius: 50%;
          transform: scale(0);
          animation: ripple 0.6s ease-out;
          pointer-events: none;
          z-index: 1;
        `;

        element.style.position = 'relative';
        element.style.overflow = 'hidden';
        element.appendChild(ripple);

        setTimeout(() => {
          ripple.remove();
        }, 600);
      }

      enhanceLoading() {
        // Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø± ØªØ­Ù…ÙŠÙ„ Ù„Ù„ØµÙˆØ±
        const images = document.querySelectorAll('img');
        images.forEach(img => {
          if (!img.complete) {
            img.style.opacity = '0';
            img.addEventListener('load', () => {
              img.style.transition = 'opacity 0.3s ease';
              img.style.opacity = '1';
            });
          }
        });
      }
    }

    // ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„
    class AccessibilityEnhancer {
      constructor() {
        this.init();
      }

      init() {
        this.enhanceKeyboardNavigation();
        this.enhanceScreenReader();
        this.enhanceFocusManagement();
      }

      enhanceKeyboardNavigation() {
        // ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Tab') {
            document.body.classList.add('keyboard-navigation');
          }
        });

        document.addEventListener('mousedown', () => {
          document.body.classList.remove('keyboard-navigation');
        });
      }

      enhanceScreenReader() {
        // Ø¥Ø¶Ø§ÙØ© ØªØ³Ù…ÙŠØ§Øª Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©
        const interactiveElements = document.querySelectorAll('a, button, input, textarea, select');
        interactiveElements.forEach(element => {
          if (!element.getAttribute('aria-label') && !element.textContent.trim()) {
            element.setAttribute('aria-label', 'Ø¹Ù†ØµØ± ØªÙØ§Ø¹Ù„ÙŠ');
          }
        });
      }

      enhanceFocusManagement() {
        // ØªØ­Ø³ÙŠÙ† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ±ÙƒÙŠØ²
        const focusableElements = document.querySelectorAll(
          'a, button, input, textarea, select, [tabindex]:not([tabindex="-1"])'
        );

        focusableElements.forEach(element => {
          element.addEventListener('focus', () => {
            element.classList.add('focused');
          });

          element.addEventListener('blur', () => {
            element.classList.remove('focused');
          });
        });
      }
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', () => {
      new ThemeManager();
      new PerformanceEnhancer();
      new AccessibilityEnhancer();
    });

    // Ø¥Ø¶Ø§ÙØ© CSS Ù„Ù„ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©
    const dynamicStyles = document.createElement('style');
    dynamicStyles.textContent = `
      @keyframes ripple {
        to {
          transform: scale(2);
          opacity: 0;
        }
      }

      .keyboard-navigation *:focus {
        outline: 2px solid var(--color-primary) !important;
        outline-offset: 2px;
      }

      .touch-device .nav-btn:hover {
        transform: none;
      }

      .scrolling .nav-bar {
        backdrop-filter: blur(20px);
      }

      .focused {
        box-shadow: 0 0 0 3px rgba(4, 231, 98, 0.3) !important;
      }
    `;
    document.head.appendChild(dynamicStyles);
  </script>
</body>
</html>

