---
layout: default
title: "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶"
description: "ØªÙØ§ØµÙŠÙ„ Ø¹Ø±Ø¶ Ø¹Ù‚Ø§Ø±ÙŠ Ù…Ù‚Ø¯Ù… Ø¹Ø¨Ø± Ø³Ù…Ø³Ø§Ø± Ø·Ù„Ø¨Ùƒ ÙÙŠ Ù…Ø¯ÙŠÙ†Ø© Ù†ØµØ±."
---

<!-- 
  Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ³ÙˆÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø¶Ø±ÙˆØ±ÙŠØ© Ù„ÙŠØ¬Ø¯Ù‡Ø§ Ø§Ù„Ø¬Ø§ÙØ§ Ø³ÙƒØ±ÙŠØ¨Øª ÙˆÙŠÙ‚ÙˆÙ… Ø¨ØªØ­Ø¯ÙŠØ«Ù‡Ø§.
  Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù…Ø­ØªÙˆØ§Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù‚Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­Ø©.
-->
<meta property="og:title" content="Ø¹Ù‚Ø§Ø±Ø§Øª Ù„Ù„Ø¨ÙŠØ¹ - Ø³Ù…Ø³Ø§Ø± Ø·Ù„Ø¨Ùƒ">
<meta property="og:description" content="Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠØ© ÙÙŠ Ù…ØµØ±">
<meta property="og:image" content="https://res.cloudinary.com/dmm4lqbcf/image/upload/og-background-template.jpg">
<meta property="og:url" content="https://aqarnasr.netlify.app">
<meta property="og:type" content="website">
<meta property="og:locale" content="ar_AR">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Ø¹Ù‚Ø§Ø±Ø§Øª Ù„Ù„Ø¨ÙŠØ¹ - Ø³Ù…Ø³Ø§Ø± Ø·Ù„Ø¨Ùƒ">
<meta name="twitter:description" content="Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠØ© ÙÙŠ Ù…ØµØ±">
<meta name="twitter:image" content="https://res.cloudinary.com/dmm4lqbcf/image/upload/og-background-template.jpg">

<!-- 
  Ù‡Ø°Ø§ Ø§Ù„ÙˆØ³Ù… Ø¶Ø±ÙˆØ±ÙŠ Ù„ØªØ¹Ù…Ù„ Ø¯Ø§Ù„Ø© Schema.org Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.
-->
<script type="application/ld+json" id="schema-json"></script>

<!-- 
  Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„ØªÙŠ Ø³ÙŠØ¹Ù…Ù„ Ø¹Ù„ÙŠÙ‡Ø§ Ø§Ù„Ø¬Ø§ÙØ§ Ø³ÙƒØ±ÙŠØ¨Øª.
-->
<main id="property-details" class="details-container">
  <!-- 
    Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ÙŠØ© Ø§Ù„ØªÙŠ Ø³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø¬Ø§ÙØ§ Ø³ÙƒØ±ÙŠØ¨Øª Ø¨Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§.
  -->
  <div class="loading-container" style="text-align: center; padding: 40px;">
    <div class="loading-spinner" style="width: 50px; height: 50px; border: 5px solid #333; border-top: 5px solid #00ff88; border-radius: 50%; margin: 0 auto 20px; animation: spin 1s linear infinite;"></div>
    <p class="loading-message" style="color: #ccc;">â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶...</p>
  </div>
  <style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>
</main>

<!-- 
  Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…Ù„Ù Ø®Ø§Ø±Ø¬ÙŠØŒ Ø³Ù†Ø¯Ù…Ø¬ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
-->
<script>
document.addEventListener("DOMContentLoaded", async function () {
  const container = document.getElementById("property-details");
  if (!container) { 
    console.error("Ø®Ø·Ø£: Ø§Ù„Ø­Ø§ÙˆÙŠØ© #property-details ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©.");
    return; 
  }

  let propertyId = null;
  try {
    const path = window.location.pathname;
    const parts = path.split('/').filter(Boolean);
    if (parts[0] === 'property' && parts.length > 1) {
      propertyId = parts[1];
    }
  } catch (e) {
    showErrorState(container, "Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± ØµØ§Ù„Ø­.");
    return;
  }

  if (!propertyId) {
    showErrorState(container, "Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ÙØ¹Ø±Ù‘Ù Ø§Ù„Ø¹Ù‚Ø§Ø± ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·.");
    return;
  }
  
  try {
    const indexUrl = "/data/properties_index.json";
    const indexRes = await fetch(`${indexUrl}?t=${Date.now()}`);
    if (!indexRes.ok) throw new Error(`ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ ÙÙ‡Ø±Ø³ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø®Ø·Ø£ ${indexRes.status}).`);

    const masterIndex = await indexRes.json();
    const propertyInfo = masterIndex.find(p => String(p.id) === String(propertyId));
    if (!propertyInfo) throw new Error(`Ø§Ù„Ø¹Ù‚Ø§Ø± Ø¨Ø§Ù„Ø±Ù‚Ù… "${propertyId}" ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ÙÙ‡Ø±Ø³.`);

    const propertyRes = await fetch(`${propertyInfo.path}?t=${Date.now()}`);
    if (!propertyRes.ok) throw new Error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù‚Ø§Ø±.");
    
    const propertyData = await propertyRes.json();
    
    updateSeoTags(propertyData, propertyId); 
    renderPropertyDetails(propertyData, container, propertyId);

  } catch (err) {
    console.error("Error in data fetching:", err);
    showErrorState(container, "Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.");
  }
});

function showErrorState(container, message) {
  container.innerHTML = `
    <div class="error-state" style="padding: 40px; text-align: center;">
      <h3 style="color: #ff6b6b;">âŒ Ø®Ø·Ø£</h3>
      <p style="color: #ccc; margin-bottom: 20px;">${message}</p>
      <button onclick="location.reload()" style="background: #00ff88; color: #000; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold;">
        ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
      </button>
    </div>
  `;
}

function copyToClipboard(text) {
  navigator.clipboard.writeText(text).then(() => {
    // Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ¥Ø¸Ù‡Ø§Ø± ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù†Ø³Ø®
    const toast = document.createElement('div');
    toast.textContent = 'ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ù†Ø¬Ø§Ø­ âœ“';
    toast.style.cssText = 'position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #00ff88; color: #000; padding: 10px 20px; border-radius: 5px; z-index: 10000; font-weight: bold;';
    document.body.appendChild(toast);
    
    setTimeout(() => {
      toast.style.opacity = '0';
      toast.style.transition = 'opacity 0.5s';
      setTimeout(() => toast.remove(), 500);
    }, 2500);
  }).catch(err => {
    console.error('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ù†Ø³Ø®:', err);
  });
}

function updateSeoTags(prop, propertyId) {
  const pageTitle = `${prop.title || 'Ø¹Ø±Ø¶ Ø¹Ù‚Ø§Ø±ÙŠ'} - Ø³Ù…Ø³Ø§Ø± Ø·Ù„Ø¨Ùƒ`;
  const description = prop.description || prop.summary || 'Ø¹Ø±Ø¶ Ø¹Ù‚Ø§Ø±ÙŠ Ù…Ù…ÙŠØ²';
  const pageURL = window.location.href;

  // Cloudinary configuration
  const CLOUD_NAME = "dmm4lqbcf";
  const BASE_IMAGE = "og-background-template";
  
  const titleText = encodeURIComponent((prop.title || '').substring(0, 50));
  const priceText = encodeURIComponent(prop.price_clean || prop.price_display || '');
  const areaText = encodeURIComponent(prop.area_clean || prop.area_display || '');

  // Ø¨Ù†Ø§Ø¡ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
  const shareImage = `https://res.cloudinary.com/${CLOUD_NAME}/image/upload/` +
    `l_text:Tajawal_64_bold:${titleText},co_rgb:FFFFFF,c_fit,w_900,x_50,y_250/` +
    `l_text:Tajawal_48_bold:${priceText},co_rgb:00FF88,c_fit,w_500,x_50,y_150/` +
    `l_text:Tajawal_48_bold:${areaText},co_rgb:FFFFFF,c_fit,w_500,x_50,y_50/` +
    `${BASE_IMAGE}.jpg`;

  // ØªØ­Ø¯ÙŠØ« ÙˆØ³ÙˆÙ… Open Graph
  setMetaTag('property', 'og:title', pageTitle);
  setMetaTag('property', 'og:description', description);
  setMetaTag('property', 'og:url', pageURL);
  setMetaTag('property', 'og:image', shareImage);
  setMetaTag('property', 'og:type', 'website');
  setMetaTag('property', 'og:locale', 'ar_AR');
  
  // ÙˆØ³ÙˆÙ… Twitter
  setMetaTag('name', 'twitter:card', 'summary_large_image');
  setMetaTag('name', 'twitter:title', pageTitle);
  setMetaTag('name', 'twitter:description', description);
  setMetaTag('name', 'twitter:image', shareImage);
  
  // ÙˆØ³Ù… Ø§Ù„ÙˆØµÙ Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠ
  setMetaTag('name', 'description', description);
  
  document.title = pageTitle;
}

function setMetaTag(attrName, attrValue, content) {
  let metaTag = document.querySelector(`meta[${attrName}="${attrValue}"]`);
  if (!metaTag) {
    metaTag = document.createElement('meta');
    metaTag.setAttribute(attrName, attrValue);
    document.head.appendChild(metaTag);
  }
  metaTag.content = content;
}

function renderPropertyDetails(prop, container, propertyId) {
  const whatsapp = prop.whatsapp || "201147758857";
  const pageURL = window.location.href;
  const priceToRender = prop.price_display || prop.price || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
  const areaToRender = prop.area_display || prop.area || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©';
  const displayId = prop.ref_id || propertyId;

  container.innerHTML = `
    <header class="details-header" style="text-align: center; margin-bottom: 30px;">
      <img src="https://i.postimg.cc/Vk8Nn1xZ/me.jpg" alt="Ø´Ø¹Ø§Ø± Ø³Ù…Ø³Ø§Ø± Ø·Ù„Ø¨Ùƒ" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; margin-bottom: 15px;">
      <h1 style="color: #00ff88; margin-bottom: 10px;">${prop.title || "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶"}</h1>
    </header>
    
    <div class="property-id-badge" style="background: #333; color: #00ff88; padding: 8px 15px; border-radius: 20px; display: inline-block; margin: 0 auto 20px; font-weight: bold;">
      Ø±Ù‚Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±: ${displayId}
    </div>
    
    <p class="details-price" style="font-size: 24px; color: #00ff88; text-align: center; margin-bottom: 30px;">
      ğŸ’° ${priceToRender}
    </p>
    
    <section class="details-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 30px;">
      <div class="detail-item" style="background: #1e1e1e; padding: 15px; border-radius: 10px;"><strong>ğŸ“ Ø§Ù„Ù…Ø³Ø§Ø­Ø©:</strong> ${areaToRender}</div>
      <div class="detail-item" style="background: #1e1e1e; padding: 15px; border-radius: 10px;"><strong>ğŸ›ï¸ Ø¹Ø¯Ø¯ Ø§Ù„ØºØ±Ù:</strong> ${prop.rooms ?? 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
      <div class="detail-item" style="background: #1e1e1e; padding: 15px; border-radius: 10px;"><strong>ğŸ› Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ù…Ø§Ù…Ø§Øª:</strong> ${prop.bathrooms ?? 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
      <div class="detail-item" style="background: #1e1e1e; padding: 15px; border-radius: 10px;"><strong>ğŸ¢ Ø§Ù„Ø¯ÙˆØ±:</strong> ${prop.floor ?? 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
      <div class="detail-item" style="background: #1e1e1e; padding: 15px; border-radius: 10px;"><strong>ğŸ›— Ù…ØµØ¹Ø¯:</strong> ${prop.elevator ? 'Ù†Ø¹Ù…' : 'Ù„Ø§'}</div>
      <div class="detail-item" style="background: #1e1e1e; padding: 15px; border-radius: 10px;"><strong>ğŸš— Ø¬Ø±Ø§Ø¬:</strong> ${prop.garage ? 'Ù…ØªÙˆÙØ±' : 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</div>
      <div class="detail-item" style="background: #1e1e1e; padding: 15px; border-radius: 10px;"><strong>ğŸ¨ Ø§Ù„ØªØ´Ø·ÙŠØ¨:</strong> ${prop.finish || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
      <div class="detail-item" style="background: #1e1e1e; padding: 15px; border-radius: 10px;"><strong>ğŸ§­ Ø§Ù„Ø§ØªØ¬Ø§Ù‡:</strong> ${prop.direction || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
    </section>
    
    <section class="details-description" style="background: #1e1e1e; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
      <h2 style="color: #00ff88; margin-bottom: 15px;">ğŸ“ Ø§Ù„ÙˆØµÙ</h2>
      <p style="line-height: 1.6;">${prop.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>
      ${prop.more_details ? `<h2 style="color: #00ff88; margin-top: 20px; margin-bottom: 15px;">ğŸ“Œ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©</h2><p style="line-height: 1.6;">${prop.more_details}</p>` : ''}
    </section>
    
    <p class="details-date" style="text-align: center; color: #888; margin-bottom: 30px;">
      ğŸ“… <strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©:</strong> ${prop.date || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}
    </p>
    
    <footer class="details-actions" style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-top: 30px;">
      <a href="https://wa.me/${whatsapp}?text=Ø£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† ${encodeURIComponent(prop.title || '')} - Ø±Ù‚Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±: ${displayId}" target="_blank" 
         style="background: #25D366; color: white; padding: 12px 25px; border-radius: 30px; text-decoration: none; font-weight: bold; display: flex; align-items: center; gap: 8px;">
        ğŸ“± ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
      </a>
      
      <button onclick="copyToClipboard('${pageURL}')" 
              style="background: #333; color: #00ff88; border: 2px solid #00ff88; padding: 12px 25px; border-radius: 30px; cursor: pointer; font-weight: bold; display: flex; align-items: center; gap: 8px;">
        ğŸ“¤ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
      </button>
      
      <a href="/" 
         style="background: #555; color: white; padding: 12px 25px; border-radius: 30px; text-decoration: none; font-weight: bold; display: flex; align-items: center; gap: 8px;">
        â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
      </a>
    </footer>
  `;
}
</script>
